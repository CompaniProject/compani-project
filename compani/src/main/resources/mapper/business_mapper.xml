<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.compani.business.mapper.BusinessMapper">
	<!-- 개인캘린더 업무 목록 -->
	<select id="selectPersonalCalendarAllBusiness" resultType="BusinessVO">
		SELECT b.buss_no
			   , b.prjt_no
			   , p.prjt_nm
			   , b.buss_nm
			   , m.memb_id
			   , CASE b.buss_imp
               WHEN 'high' THEN '상'
               WHEN 'mid' THEN '중'
               WHEN 'low' THEN '하' END AS buss_imp
			   , b.buss_prgre
			   , b.buss_frdt
			   , b.buss_todt
			   , b.buss_st
		FROM business b
		LEFT JOIN project p 
				ON b.prjt_no = p.prjt_no
		LEFT JOIN business_member m 
				ON b.buss_no = m.buss_no
		WHERE buss_st = 'PROCEED'
		OR	  buss_st = 'DELAY'
		<!-- AND memb_id = #{sessionId} -->
		ORDER BY buss_frdt;
	</select>
	
	<!-- 프로젝트 캘린더 업무 목록 -->
	<select id="selectProjectCalendarAllBusiness" resultType="BusinessVO">
		Select buss_no
			   , prjt_no
			   , buss_nm
			   , case buss_imp
               		when 'high'	then '상'
               		when 'mid' 	then '중'
               		when 'low' 	then '하'
               		end as buss_imp
			   , buss_prgre
			   , buss_frdt
			   , buss_todt
			   , buss_st
		FROM business
		WHERE buss_st = 'PROCEED'
		OR	  buss_st = 'DELAY'
		<!-- AND prjt_no = #{prjt_no} -->
		ORDER BY buss_no
	</select>
</mapper>