<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>프로젝트 캘린더</title>
<link href="/css/style.css" rel="stylesheet">
<script src='https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@6.1.9/index.global.min.js'></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<style type="text/css">
#projectCalendarBox {
	width: 70%;
	
	float: right;
}

#projectCalendar {
	margin: 10px;
	background-color: white;
}

.calendarBusinessInfo {
	height: 700px;
	width: 30%;
	padding: 10px;
	background-color: #dddddd;
	float: right;
}

select {
	appearance: none;
	text-align: center;
}

.fc .fc-toolbar.fc-header-toolbar {
	margin: 10px;
}

.fc-toolbar-chunk {
    display: flex;
    align-items: center;
}

#fc-dom-1 {
	margin-left: 0;
}

.fc .fc-prev-button {
	margin-right: 0.75em;
}

.selectBox {
	background-color:red;
	width: 100%;
	margin: 10px 0;
	float:left;
	
}

.businessList {
	background-color: white;
	width: 100%;
	border: 1px solid;
	float: left;
}

.businessList2 {
	overflow: hidden;
	text-overflow: ellipsis;
	height: 21px;
	word-wrap : brek-word;
	display : -webkit-box;
	-webkit-line-clamp : 1;
	-webkit-box-orient: vertical;
}
</style>
</head>
<body>
	<div id="main-wrapper">
		<header th:replace="fragments/header :: header"></header>
		<aside th:replace="fragments/aside:: aside"></aside>
		
		<div class="content-body">
			
			<!-- 업무 목록 -->
			<div class='calendarBusinessInfo'>
				<div class="selectBox">
					<span style="float:right;">
						<select name="projectCalendarSort" form="projectCalendarBusinessForm">
							<option hidden="" disabled="disabled" selected="selected" value="">정렬</option>
							<option value="">날짜순</option>
							<option value="">진척도</option>
							<option value="">중요도</option>
						</select>
					</span>
				</div>
				
				<th:block th:each="bussInfo : ${projectCalendarList}">
					<div class="businessList">
						<div class="businessList2" th:text="${#dates.format(bussInfo.bussFrdt, 'yy-MM-dd')} + '~' + ${#dates.format(bussInfo.bussTodt, 'yy-MM-dd')} + '|중요도 ' + ${bussInfo.bussImp}">
						</div>
						<div class="businessList2" th:text="${bussInfo.bussNm} + '|진척도 ' + ${bussInfo.bussPrgre} + '%'"></div>
					</div>
				</th:block>
				
			</div>
			
			<!-- 달력&차트 내용 -->
			<div id="projectCalendarBox" >
				<div id='projectCalendar' class="tab-pane"></div>
				
				<div id='projectGanttchart' class="tab-pane">project gantt chart</div>
			</div>
		</div>
	</div>
	
	<script th:inline="javascript">
    	// 달력 코드.
    	document.addEventListener('DOMContentLoaded', function() {
        	var calendarEl = document.getElementById('projectCalendar');
        	var calendar = new FullCalendar.Calendar(calendarEl, {
        		initialView: 'dayGridMonth',
        		customButtons: {
        			calendarBtn: {
        				text: '달력',
        				click: function(){
        					$('#projectCalendar').css("display","flex");
        					$('#projectGanttchart').css("display","none");
        				}
        			},
        			ganttBtn: {
        				text: '차트',
        				click: function(){
        					$('#projectGanttchart').css("display","flex");
        					$('#projectCalendar').css("display","none");
        				}
        			}
        		},
        		headerToolbar: {
					left: 'today',
					center: 'prev title next',
					right: 'calendarBtn,ganttBtn'
				},
				titleFormat: function (date) {
		    	// YYYY년 MM월
		    		return `${date.date.year}년 ${date.date.month + 1}월`;
		    	},
		    	events: projectCalendarArr()
        	});
        	calendar.render();
      	});
    	
    	function projectCalendarArr(){
    		let arr = [];
    		let obj = new Object();
    		
    		for(let i=0; i<1; i++){
    			obj.title = i;
    			obj.start = '2023-10-15';
    			obj.end = '2023-10-18';
    			arr.push(obj);
    		}
    		return arr;
    	}
    	
    </script>
	
	<script src="plugins/common/common.min.js"></script>
	<script src="js/custom.min.js"></script>
	<script src="js/settings.js"></script>
	<script src="js/gleek.js"></script>
	<script src="js/styleSwitcher.js"></script>
</body>
</html>













