<!DOCTYPE html>
<html class="h-100" lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=chrome">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>MemberSignUp</title>
<!-- Favicon icon -->
<link rel="icon" type="image/png" sizes="16x16"
	href="images/favicon.png">
<!-- Custom Stylesheet -->
<link href="css/style.css" rel="stylesheet">
<style>
.autocomplete>div.active {
	background: #58ACFA;
	color: #000000;
}
mark, .mark {
    padding: 0.2em;
    font-weight: 900;
    background-color: transparent;
}
</style>
</head>

<body>

	<!--*******************
        Preloader start
    ********************-->
	<div id="preloader">
		<div class="loader">
			<svg class="circular" viewBox="25 25 50 50">
                <circle class="path" cx="50" cy="50" r="20" fill="none"
					stroke-width="3" stroke-miterlimit="10" />
            </svg>
		</div>
	</div>
	<!--*******************
        Preloader end
    ********************-->


	<!--**********************************
        Main wrapper start
    ***********************************-->
	<div id="main-wrapper">

		<!--**********************************
            Nav header start
        ***********************************-->
		<div class="nav-header">
			<div class="brand-logo">
				<a href="loginForm"> <b class="logo-abbr"><img
						src="images/logo.png" alt=""> </b> <span class="logo-compact"><img
						src="./images/logo-compact.png" alt=""></span> <span
					class="brand-title"> <img src="images/logo-text.png" alt="">
				</span>
				</a>
			</div>
		</div>
		<!--**********************************
            Nav header end
        ***********************************-->

		<div class="header" style="background: #F3F3F9;">
			<div class="header-content clearfix">

				<div class="nav-control"></div>
				<div class="header-left">
					<div class="input-group icons"></div>
				</div>
				<div class="header-right">
					<ul class="clearfix">
						<li class="icons dropdown"></li>
						<li class="icons dropdown"></li>
						<li class="icons dropdown d-none d-md-flex"></li>
						<li class="icons dropdown">
							<div class="user-img c-pointer position-relative"
								data-toggle="dropdown"></div>
							<div class="drop-down dropdown-profile   dropdown-menu">
								<div class="dropdown-content-body"></div>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>



		<!--**********************************
            Content body start
        ***********************************-->

		<div class="content-body">


			<!-- row -->

			<div class="container-fluid">
				<div class="row justify-content-center">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-body">
								<div class="form-validation">
									<form class="form-valide" action="#" method="post">
										<h1>
											<b>회원가입(사원)</b>
										</h1>
										<div class="form-group row">
											<label class="col-lg-4 col-form-label" for="val-skill">소속기관
											</label>





											<!-- Button trigger modal -->
											<button type="button" class="btn btn-primary"
												data-toggle="modal" data-target="#modalGrid">Basic
												modal</button>
											<!-- Modal -->
											<div class="modal fade" id="modalGrid">
												<div class="modal-dialog" role="document">
													<div class="modal-content">
														<div class="modal-header">
															<h5 class="modal-title">Modal title</h5>
															<button type="button" class="close" data-dismiss="modal">
																<span>&times;</span>
															</button>
														</div>
														<div class="modal-body">


															<div class="container-fluid">
																<div class="case">
																	<!-- 검색어 입력 폼 -->
																	<input type="text" id="search">
																	<!-- 자동완성 단어 리스트 -->
																	<div class="autocomplete" style="width: 163px"></div>
																</div>
															</div>


														</div>
														<div class="modal-footer">
															<button type="button" class="btn btn-secondary"
																data-dismiss="modal">Close</button>
															<button type="button" class="btn btn-primary">Save
																changes</button>
														</div>
													</div>
												</div>
											</div>




											<div class="col-lg-6">
												<input type="text" class="form-control" id="val-skill"
													name="val-skill" placeholder="소속기관 검색" list="val-com">
												<datalist id="val-com">
													<option value="html"></option>
													<option value="css"></option>
													<option value="javascript"></option>
													<option value="angular"></option>
													<option value="angular"></option>
													<option value="vuejs"></option>
													<option value="ruby"></option>
													<option value="php"></option>
													<option value="asp"></option>
													<option value="python"></option>
													<option value="mysql"></option>
												</datalist>
											</div>
										</div>

										<div class="form-group row">
											<span class="text-danger">*</span> <label
												class="col-lg-4 col-form-label" for="val-suggestions">아이디

											</label>
											<div class="col-lg-6">
												<input type="text" class="form-control" id="val-suggestions"
													name="val-suggestions" placeholder="">
											</div>
										</div>
										<div class="form-group row">
											<span class="text-danger">*</span> <label
												class="col-lg-4 col-form-label" for="val-password">비밀번호

											</label>
											<div class="col-lg-6">
												<input type="password" class="form-control"
													id="val-password" name="val-password"
													placeholder="8~20자 / 특수문자 모두 혼용">
											</div>
										</div>
										<div class="form-group row">
											<span class="text-danger">*</span> <label
												class="col-lg-4 col-form-label" for="val-confirm-password">비밀번호
												확인 </label>
											<div class="col-lg-6">
												<input type="password" class="form-control"
													id="val-confirm-password" name="val-confirm-password"
													placeholder="">
											</div>
										</div>
										<div class="form-group row">
											<span class="text-danger">*</span> <label
												class="col-lg-4 col-form-label" for="val-username">성명

											</label>
											<div class="col-lg-6">
												<textarea class="form-control" id="val-username"
													name="val-username" placeholder=""></textarea>
											</div>
										</div>

										<div class="form-group row">
											<span class="text-danger">*</span> <label
												class="col-lg-4 col-form-label" for="val-birth">생년월일

											</label>
											<div class="col-lg-6">
												<input type="date" class="form-control" id="val-birth"
													name="val-birth" placeholder="0000/00/00" required
													pattern="\d{4}/\d{2}/\d{2}">
											</div>
										</div>
										<div class="form-group row">
											<label class="col-lg-4 col-form-label" for="val-email">이메일
											</label>
											<div class="col-lg-6">
												<input type="email" class="form-control" id="val-email"
													name="val-email" placeholder="">
											</div>
										</div>

										<div class="form-group row" >
											<label class="col-lg-4 col-form-label" for="val-phoneus">전화번호
											</label>
											<div class="col-lg-6">
												<input type="text" class="form-control" id="val-phoneus"
													name="val-phoneus" placeholder="010-0000-0000">
											</div>
										</div>
										<div class="form-group row">
											<label class="col-lg-4 col-form-label" for="val-username">부서
											</label>
											<div class="col-lg-6">
												<input type="text" class="form-control" id="val-username"
													name="val-username" placeholder="">
											</div>
										</div>
										<div class="form-group row">
											<label class="col-lg-4 col-form-label" for="val-username">직급
											</label>
											<div class="col-lg-6">
												<input type="text" class="form-control" id="val-username"
													name="val-username" placeholder="">
											</div>
										</div>

										<div class="form-group row">
											<div class="col-lg-8 ml-auto">
												<button type="submit" class="btn btn-primary">가입신청</button>
												<button type="button" class="btn btn-primary"
													onclick="location.href='loginForm';">메인으로</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- #/ container -->
		</div>

		<!--**********************************
            Content body end
        ***********************************-->



	</div>
	<!--**********************************
        Main wrapper end
    ***********************************-->

	<!--**********************************
        Scripts
    ***********************************-->
	<script src="plugins/common/common.min.js"></script>
	<script src="js/custom.min.js"></script>
	<script src="js/settings.js"></script>
	<script src="js/gleek.js"></script>
	<script src="js/styleSwitcher.js"></script>
	<script src=""></script>

	<script src="./plugins/validation/jquery.validate.min.js"></script>
	<script src="./plugins/validation/jquery.validate-init.js"></script>
	<script>
	// 검색어 리스트
	const compList = [];
	const compNm = [];
	const obj={};
	$(function(){
	    $.ajax('http://localhost/companyList', {
	        type : 'post'
	    })
	    .done(result => {
	        $.each(result.data, function(index, element){
	        	compList.push(element);
	        });
	        $.each(compList, function(index, element){
	        	compNm.push(element.CO_NM);
	        });
	    })
	    .fail(err =>console.log(err));
	    
	    document.querySelector('.autocomplete').children.on('mouseover', obj = window.event.target);
	});

	// 검색 입력 요소
	const $search = document.querySelector("#search");
	// 검색어 리스트 요소
	const $autoComplete = document.querySelector(".autocomplete");

	// 현재 가르키고 있는 검색어 순번
	let nowIndex = 0;
	
	// 단어 입력이 완료되었을 때
	$search.onkeyup = (event) => {
	  const value = $search.value.trim();

	  // 리스트 필터링
	  const matchCompList = value
	    ? compNm.filter((label) => label.includes(value))
	    : [];
	    
/* 	  $('.autoComplete>div').on('mouseover', nowIndex = document.querySelector('.autocomplete').children.length - ); */
	    
	  switch (event.keyCode) {
	    // UP KEY
	    case 38:
	      nowIndex = Math.max(nowIndex - 1, 0);
	      break;

	    // DOWN KEY
	    case 40:
	      nowIndex = Math.min(nowIndex + 1, matchCompList.length - 1);
	      break;

	    // ENTER KEY
	    case 13:
	      document.querySelector("#search").value = matchCompList[nowIndex] || "";
	      // 초기화
	      nowIndex = 0;
	      matchCompList.length = 0;
	      break;

	    // 그외 다시 초기화
	    default:
	      nowIndex = 0;
	      break;
	  }
	  
	  // 리스트 보여주기
	  showList(matchCompList, value, nowIndex);
	};
	
	
	
	const showList = (data, value, nowIndex) => {
		  // 정규식으로 변환
		  const regex = new RegExp(`(${value})`, "g");
		  
		  $autoComplete.innerHTML = data
		    .map(
		      (label, index) => `
		        <div class='${nowIndex === index ? "active" : ""}'>
		          ${label.replace(regex, "<mark>$1</mark>")}
		        </div>
		      `
		    )
		    .join("");
		};
	
	</script>

</body>

</html>