<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<th:block layout:fragment="content">
	<div class="row">
		<div class="col-lg-8">
		<div class="column">
			<div>
				<div class="row">
			        <div class="col-lg-2">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">총 소요일수</h4>
								<span th:text="${projectStatus.prjtStatDtCnt}">
								</span>
			                </div>
			            </div>
			        </div>
			        <div class="col-lg-2">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">참여자</h4>
								<span th:text="${projectStatus.prjtMembCnt}">
								</span>
			                </div>
			            </div>
			        </div>
			        <div class="col-lg-2">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">총 업무개수</h4>
								<span th:text="${projectStatus.bussCnt}">
								</span>
			                </div>
			            </div>
			        </div>
			        <div class="col-lg-2">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">완료한 업무</h4>
								<span th:text="${projectStatus.bussCmplCnt}">
								</span>
			                </div>
			            </div>
			        </div>
			        <div class="col-lg-2">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">초과완료한 업무</h4>
								<span th:text="${projectStatus.bussExceCnt}">
								</span>
			                </div>
			            </div>
			        </div>
			        <div class="col-lg-2">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">미완료한 업무</h4>
								<span th:text="${projectStatus.bussUncmplCnt}">
								</span>
			                </div>
			            </div>
			        </div>
				</div>
				<div class="row">
			        <div class="col-lg-3">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">총 이슈 개수</h4>
								<span th:text="${projectStatus.issuCnt}">
								</span>
			                </div>
			            </div>
			        </div>
			        <div class="col-lg-3">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">해결 이슈</h4>
								<span th:text="${projectStatus.issuSolveCnt}">
								</span>
			                </div>
			            </div>
			        </div>
			        <div class="col-lg-3">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">미해결 이슈</h4>
								<span th:text="${projectStatus.issuUnsolveCnt}">
								</span>
			                </div>
			            </div>
			        </div>
			        <div class="col-lg-3">
			            <div class="card">
			                <div class="card-body">
								<h4 class="card-title">해결불가 이슈</h4>
								<span th:text="${projectStatus.issuUnsolvableCnt}">
								</span>
			                </div>
			            </div>
			        </div>
				</div>
			</div>
			<!-- Project Status Chart Area -->
			<div>
			        <div class="col-lg-12">
			            <div class="card">
			                <div class="card-body">
			                    <h4 class="card-title">업무 통계</h4>
			                    <div class="row">
			        				<div class="col-lg-7">
			                    	<canvas id="bussDonutChart" width="300" height="250"></canvas>
			                    	</div>
			        				<div class="col-lg-5">
			                    	<canvas id="bussStBar" width="200" height="300"></canvas>
			                    	</div>    
			                    </div> 
			                </div>
			            </div>
		        </div>
			</div>
			<!-- Project Status Chart Area End -->
			<!-- Issue Status Chart Area -->
			<div>
			    <div class="col-lg-12">
			        <div class="card">
			            <div class="card-body">
			            	<h4 class="card-title">이슈 통계</h4>
		                    <div class="row">
		        				<div class="col-lg-7">
		                    	<canvas id="issuDonutChart" width="300" height="250"></canvas>
		                    	</div>
		        				<div class="col-lg-5">
		                    	<canvas id="issuStBar" width="200" height="300"></canvas>
		                    	</div>    
		                    </div>              
			            </div>
			        </div>
			    </div>
			</div>
		</div>
		</div>
		<!-- Issue Status Chart Area End -->
		<!-- Comemnt Area -->
	    <div class="col-lg-4">
	        <div class="card"  style="height:80vh;">
	        	<div class="card-header bg-white">
                    <h5 class="card-title">Card title</h5>
                    <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                </div>
	            <div class="card-body" style="overflow-y:auto; background-color:#FAFAFA;">
	            			<div class="card">
		                        <div class="card-body"><div class="media">
                                        <div class="media-body">
                                            <h5 class="mt-0">Media heading</h5>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi
                                            vulputate fringilla. Donec lacinia congue felis in faucibus.
                                            <div class="media mt-3">
                                                <div class="media-body">
                                                    <h5 class="mt-0">Media heading</h5>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc
                                                    ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.</div>
                                            </div>
                                        </div>
                                    </div>
	                            </div>
                             </div>
	            </div>
	            <div class="card-footer">
		            <p class="card-text d-inline"><small class="text-muted">Last updated 3 mins ago</small>
		            </p><a href="#" class="card-link float-right"><small>Card link</small></a>
	            </div>
	        </div>
	    </div>
	    <!-- Comment Area End -->
	</div>
	
	<script th:inline="javascript">
window.onload = function () {
    donutBussChartDraw();
    donutIssueChartDraw();
    stackBussChartDraw();
    stackIssueChartDraw();
}

// -------------------- Status Data Start
const projectStatus = [[${projectStatus}]];
const cpnStatForCurrDt = [[${cpnStatForCurrDt}]];
const cpnStatForPrjtDt = [[${cpnStatForPrjtDt}]];
// -------------------- Status Data End


//---------------------- Business Doughnut Chart Start ------
let pieBussChartData = {
	
    labels: ['완료', '미완료', '초과완료'],
    datasets: [{
        data: [projectStatus.bussCmplCnt, projectStatus.bussUncmplCnt, projectStatus.bussExceCnt],
        backgroundColor: ['rgb(255, 99, 132)', 'rgb(255, 159, 64)', 'rgb(255, 205, 86)']
    }] 
};

let donutBussChartDraw = function() {
    let ctx = document.getElementById('bussDonutChart').getContext('2d');
    
    window.pieChart = new Chart(ctx, {
        type: 'doughnut',
        data: pieBussChartData,
        options: {
            responsive: false
        }
    });
};
//---------------------- Business Doughnut Chart End ------

let barOption = {
    	plugins:{
    		stacked100 :{
    			enable: true
    		}
    	},
        responsive: false,
        scales: {
            xAxes: [{
                stacked: true
            }],
            yAxes: [{
                stacked: true
            }]
        },
    }

// ----------------------Business Bar Chart Start -------
let stackBussChartDraw = function(){
	
	var stctx = document.getElementById("bussStBar");
    window.stBar = new Chart(stctx, { 
        type: 'bar', 
        data: { 
            labels: ["프로젝트", "회사(프로젝트 완료시점)","회사(현재)"],
            datasets: [{ 
                label: '완료', 
                backgroundColor: 'rgb(255, 99, 132)', 
                data: [projectStatus.bussCmplRate,
                	cpnStatForPrjtDt.mmBussCmplRate,
                	cpnStatForCurrDt.mmBussCmplRate], 
            }, { 
                label: '미완료', 
                backgroundColor: 'rgb(255, 159, 64)', 
                data: [projectStatus.bussUncmplRate,
                	cpnStatForPrjtDt.mmBussUncmplRate,
                	cpnStatForCurrDt.mmBussUncmplRate], 
            }, { 
                label: '초과완료', 
                backgroundColor: 'rgb(255, 205, 86)', 
                data: [projectStatus.bussExceRate,
                	cpnStatForPrjtDt.mmBussExcecmplRate,
                	cpnStatForCurrDt.mmBussExcecmplRate], 
            }], 
        }, 
        options: barOption
    });
}

//----------------------Business Bar Chart End -------

//----------------------Issue Doughnut Chart Start
let pieIssuChartData = {
	
    labels: ['해결', '미해결', '해결불가'],
    datasets: [{
        data: [projectStatus.issuSolveCnt, projectStatus.issuUnsolveCnt, projectStatus.issuUnsolvableCnt],
        backgroundColor: ['rgb(255, 99, 132)', 'rgb(255, 159, 64)', 'rgb(255, 205, 86)']
    }] 
};

let donutIssueChartDraw = function() {
    let ctx = document.getElementById('issuDonutChart').getContext('2d');
    
    window.pieChart = new Chart(ctx, {
        type: 'doughnut',
        data: pieIssuChartData,
        options: {
            responsive: false
        }
    });
};

//----------------------Issue Doughnut Chart Start End

// ----------------------Issue Bar Chart Start -------
let stackIssueChartDraw = function(){
	
	var stctx = document.getElementById("issuStBar");
    window.stBar = new Chart(stctx, { 
        type: 'bar', 
        data: { 
            labels: ["프로젝트", "회사(프로젝트 완료시점)","회사(현재)"],
            datasets: [{ 
                label: '완료', 
                backgroundColor: 'rgb(255, 99, 132)', 
                data: [projectStatus.issuSolveRate,
                	cpnStatForPrjtDt.mmIssuSolveRate,
                	cpnStatForCurrDt.mmIssuSolveRate], 
            }, { 
                label: '미완료', 
                backgroundColor: 'rgb(255, 159, 64)', 
                data: [projectStatus.issuUnsolveRate,
                	cpnStatForPrjtDt.mmIssuUnsolveRate,
                	cpnStatForCurrDt.mmIssuUnsolveRate], 
            }, { 
                label: '초과완료', 
                backgroundColor: 'rgb(255, 205, 86)', 
                data: [projectStatus.issuUnsolvableRate,
                	cpnStatForPrjtDt.mmIssuUnsolvableRate,
                	cpnStatForCurrDt.mmIssuUnsolvableRate], 
            }], 
        }, 
        options: barOption
    });
}

</script>
</th:block>
</body>
</html>